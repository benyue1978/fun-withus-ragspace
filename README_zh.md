# RAGSpace - AI çŸ¥è¯†ä¸­å¿ƒ

[English](README.md) | [ä¸­æ–‡](README_zh.md)

ğŸ¤– æ„å»ºå’ŒæŸ¥è¯¢æ‚¨çš„ä¸ªäººçŸ¥è¯†åº“ï¼Œè·å¾—AIè¾…åŠ©ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. **Supabase é¡¹ç›®**: åœ¨ [supabase.com](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
2. **ç¯å¢ƒé…ç½®**: å¤åˆ¶å¹¶é…ç½®ç¯å¢ƒå˜é‡

### æœ¬åœ°å®‰è£…

1. **å…‹éš†å¹¶å®‰è£…**
   ```bash
   git clone https://github.com/your-username/ragspace.git
   cd ragspace
   pip install -r requirements.txt
   ```

2. **é…ç½®ç¯å¢ƒ**
   ```bash
   cp env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ Supabase å‡­æ®
   ```

3. **è¿è¡Œåº”ç”¨**
   ```bash
   python app.py
   ```

4. **æ‰“å¼€æµè§ˆå™¨**
   è®¿é—® `http://localhost:8000`

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸ“š çŸ¥è¯†åº“ç®¡ç†**: ä¸Šä¼ æ–‡ä»¶ã€æ·»åŠ ç½‘ç«™ã€å¯¼å…¥ GitHub ä»“åº“
- **ğŸ•·ï¸ ç½‘ç»œçˆ¬è™«ç³»ç»Ÿ**: è‡ªåŠ¨ä» URL å’Œ GitHub ä»“åº“æå–å†…å®¹
- **ğŸ’¬ AI èŠå¤©ç•Œé¢**: ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ‚¨çš„çŸ¥è¯†åº“
- **ğŸ”— MCP é›†æˆ**: è¿æ¥ Cursorã€Claude Desktop å’Œå…¶ä»– LLM å®¢æˆ·ç«¯
- **ğŸ¨ ç°ä»£ç•Œé¢**: æ ‡ç­¾å¼ç•Œé¢ï¼Œä¾§è¾¹æ å¸ƒå±€ï¼Œå“åº”å¼è®¾è®¡
- **ğŸ—„ï¸ Supabase æ•°æ®åº“**: æŒä¹…åŒ–å­˜å‚¨ï¼ŒPostgreSQL å’Œå®æ—¶åŠŸèƒ½
- **âš™ï¸ å¯é…ç½®çˆ¬è™«**: åŸºäºç¯å¢ƒå˜é‡çš„æ‰€æœ‰çˆ¬è™«é…ç½®
- **ğŸš€ è½»æ¾éƒ¨ç½²**: ä¸€é”®éƒ¨ç½²åˆ° Renderã€Railway æˆ– Hugging Face Spaces

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### ä¸ªäººçŸ¥è¯†ç®¡ç†
- **ç ”ç©¶è®ºæ–‡**: ä¸Šä¼ å’ŒæŸ¥è¯¢å­¦æœ¯è®ºæ–‡
- **é¡¹ç›®æ–‡æ¡£**: ä¸ºæ‚¨çš„é¡¹ç›®æ„å»ºçŸ¥è¯†åº“
- **å­¦ä¹ ç¬”è®°**: ç»„ç»‡å­¦ä¹ ææ–™å’Œç¬”è®°
- **æŠ€æœ¯æ–‡æ¡£**: å­˜å‚¨å’Œæœç´¢æŠ€æœ¯æŒ‡å—

### å›¢é˜Ÿåä½œ
- **å…±äº«çŸ¥è¯†åº“**: åˆ›å»ºå›¢é˜Ÿæ–‡æ¡£ä¸­å¿ƒ
- **ä»£ç æ–‡æ¡£**: å¯¼å…¥ GitHub ä»“åº“è¿›è¡Œä»£ç æœç´¢
- **æµç¨‹æ–‡æ¡£**: å­˜å‚¨å’ŒæŸ¥è¯¢å›¢é˜Ÿæµç¨‹
- **ä¼šè®®è®°å½•**: ç»„ç»‡å’Œæœç´¢ä¼šè®®è®°å½•

### ç¤¾åŒºçŸ¥è¯†åˆ†äº«
- **å¼€æºé¡¹ç›®**: ä¸ºæ‚¨çš„é¡¹ç›®åˆ›å»ºæ–‡æ¡£ä¸­å¿ƒ
- **æŠ€æœ¯ç¤¾åŒº**: ä¸ç¤¾åŒºåˆ†äº«çŸ¥è¯†
- **æ•™è‚²å†…å®¹**: æ„å»ºå­¦ä¹ èµ„æºé›†åˆ
- **å°ä¼—æŠ€æœ¯**: è®°å½•ç½•è§æˆ–ä¸“ä¸šçš„æŠ€æœ¯

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### 1. åˆ›å»ºæ–‡æ¡£é›†
1. è¿›å…¥ "ğŸ“š çŸ¥è¯†ç®¡ç†" æ ‡ç­¾
2. è¾“å…¥çŸ¥è¯†åº“çš„åç§°å’Œæè¿°
3. ç‚¹å‡» "åˆ›å»ºæ–‡æ¡£é›†"

### 2. æ·»åŠ å†…å®¹
æ‚¨å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼æ·»åŠ å†…å®¹ï¼š

#### æ–‡ä»¶ä¸Šä¼ 
1. ä»ä¾§è¾¹æ é€‰æ‹©æ‚¨çš„æ–‡æ¡£é›†
2. è¿›å…¥ "ğŸ“ æ·»åŠ æ–‡ä»¶" æ ‡ç­¾
3. ä¸Šä¼  PDFã€TXTã€MD æˆ–å…¶ä»–æ–‡æœ¬æ–‡ä»¶
4. æ–‡ä»¶å°†è‡ªåŠ¨å¤„ç†å¹¶åµŒå…¥

#### ç½‘ç«™å†…å®¹
1. ä»ä¾§è¾¹æ é€‰æ‹©æ‚¨çš„æ–‡æ¡£é›†
2. è¿›å…¥ "ğŸŒ æ·»åŠ  URL" æ ‡ç­¾
3. è¾“å…¥ç½‘ç«™ URL
4. é€‰æ‹©å†…å®¹ç±»å‹ï¼ˆç½‘ç«™ã€æ–‡æ¡£ç­‰ï¼‰
5. ç‚¹å‡» "æ·»åŠ  URL"

#### GitHub ä»“åº“
1. ä»ä¾§è¾¹æ é€‰æ‹©æ‚¨çš„æ–‡æ¡£é›†
2. è¿›å…¥ "ğŸ™ æ·»åŠ  GitHub ä»“åº“" æ ‡ç­¾
3. è¾“å…¥ä»“åº“ URLï¼ˆä¾‹å¦‚ï¼š`owner/repo` æˆ– `https://github.com/owner/repo`ï¼‰
4. å¯é€‰æ‹©æŒ‡å®šåˆ†æ”¯
5. ç‚¹å‡» "æ·»åŠ ä»“åº“"

### 3. æŸ¥è¯¢æ‚¨çš„çŸ¥è¯†åº“
1. è¿›å…¥ "ğŸ’¬ èŠå¤©ç•Œé¢" æ ‡ç­¾
2. ä»ä¸‹æ‹‰èœå•é€‰æ‹©æ‚¨çš„æ–‡æ¡£é›†
3. ç”¨è‡ªç„¶è¯­è¨€æé—®
4. è·å¾—å¸¦æœ‰æ¥æºå¼•ç”¨çš„ AI å›ç­”

### 4. ä¸ MCP å®¢æˆ·ç«¯ä¸€èµ·ä½¿ç”¨
è¿æ¥ Cursorã€Claude Desktop æˆ–å…¶ä»– LLM å®¢æˆ·ç«¯ï¼š

#### Cursor é›†æˆ
1. æ‰“å¼€ Cursor è®¾ç½® â†’ MCP æœåŠ¡å™¨
2. æ·»åŠ æœåŠ¡å™¨é…ç½®ï¼š
   ```json
   {
     "name": "RAGSpace",
     "description": "æŸ¥è¯¢æ‚¨çš„çŸ¥è¯†åº“",
     "sse_url": "https://your-app.onrender.com/gradio_api/mcp"
   }
   ```

#### Claude Desktop é›†æˆ
1. æ‰“å¼€ Claude Desktop è®¾ç½® â†’ MCP æœåŠ¡å™¨
2. æ·»åŠ ä¸ä¸Šé¢ç›¸åŒçš„é…ç½®

## ğŸ”§ MCP é›†æˆ

RAGSpace åŒ…å«å†…ç½®çš„ MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æœåŠ¡å™¨ï¼Œå…è®¸ LLM å®¢æˆ·ç«¯è®¿é—®æ‚¨çš„çŸ¥è¯†åº“ã€‚

### å¯ç”¨çš„ MCP å·¥å…·

**æ ¸å¿ƒå·¥å…·:**
- `list_docset` - åˆ—å‡ºæ‰€æœ‰æ–‡æ¡£é›†åˆ
- `ask` - ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ‚¨çš„çŸ¥è¯†åº“

### æµ‹è¯• MCP æœåŠ¡å™¨

1. **å®‰è£… mcp-remote**
   ```bash
   npm install -g mcp-remote
   ```

2. **åˆ›å»ºé…ç½®æ–‡ä»¶** `mcp_inspector_config.json`:
   ```json
   {
     "mcpServers": {
       "ragspace": {
         "command": "npx",
         "args": ["mcp-remote", "http://localhost:8000/gradio_api/mcp/"],
         "env": {}
       }
     }
   }
   ```

3. **æµ‹è¯•è¿æ¥**
   ```bash
   # åˆ—å‡ºå¯ç”¨å·¥å…·
   mcp-inspector --config mcp_inspector_config.json --server ragspace --cli --method tools/list
   
   # æé—®
   mcp-inspector --config mcp_inspector_config.json --server ragspace --cli --method tools/call --tool-name ask --params '{"query": "What is available?", "docset": null}'
   ```

## ğŸš€ éƒ¨ç½²

### Renderï¼ˆæ¨èï¼‰

1. **Fork æ­¤ä»“åº“**
2. **è¿æ¥åˆ° Render**
   - å‰å¾€ [Render æ§åˆ¶å°](https://dashboard.render.com)
   - ç‚¹å‡» "New Web Service"
   - è¿æ¥æ‚¨çš„ GitHub ä»“åº“

3. **é…ç½®æœåŠ¡**
   - **åç§°**: `ragspace`
   - **ç¯å¢ƒ**: `Python`
   - **æ„å»ºå‘½ä»¤**: `pip install -r requirements.txt`
   - **å¯åŠ¨å‘½ä»¤**: `python app.py`

4. **è®¾ç½®ç¯å¢ƒå˜é‡**
   - ä» `env.example` æ·»åŠ æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡

5. **éƒ¨ç½²**
   - ç‚¹å‡» "Create Web Service"

### å…¶ä»–å¹³å°

- **Railway**: ä½¿ç”¨ `railway.json` é…ç½®
- **Hugging Face Spaces**: ä½¿ç”¨ Spaces é…ç½®
- **Docker**: ä½¿ç”¨æä¾›çš„ `Dockerfile`

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

#### å¿…éœ€å˜é‡
| å˜é‡ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `SUPABASE_URL` | Supabase é¡¹ç›® URL | (å¿…éœ€) |
| `SUPABASE_KEY` | Supabase API å¯†é’¥ | (å¿…éœ€) |
| `PORT` | æœåŠ¡å™¨ç«¯å£ | `8000` |
| `DEBUG` | è°ƒè¯•æ¨¡å¼ | `false` |

#### GitHub çˆ¬è™«é…ç½®
| å˜é‡ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `GITHUB_TOKEN` | GitHub API ä»¤ç‰Œ | (å¯é€‰) |
| `GITHUB_FILE_TYPES` | æ”¯æŒçš„æ–‡ä»¶ç±»å‹ | `.md,.py,.js,.ts,.txt,.rst,.adoc,.json,.yaml,.yml` |
| `GITHUB_MAX_FILE_SIZE` | æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ | `50000` |
| `GITHUB_MAX_DEPTH` | æœ€å¤§ç›®å½•æ·±åº¦ | `10` |

#### ç½‘ç«™çˆ¬è™«é…ç½®
| å˜é‡ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `WEBSITE_MAX_DEPTH` | æœ€å¤§çˆ¬å–æ·±åº¦ | `3` |
| `WEBSITE_MAX_PAGES` | æœ€å¤§çˆ¬å–é¡µé¢æ•° | `10` |
| `WEBSITE_TIMEOUT` | è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰ | `10` |

## ğŸ—ï¸ å¼€å‘

### é¡¹ç›®ç»“æ„

```
fun-withus-ragspace/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ ragspace/
â”‚       â”œâ”€â”€ config/                    # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹
â”‚       â”œâ”€â”€ services/                  # çˆ¬è™«æœåŠ¡
â”‚       â”œâ”€â”€ storage/                   # æ•°æ®åº“ç®¡ç†
â”‚       â”œâ”€â”€ ui/                        # UI ç»„ä»¶
â”‚       â””â”€â”€ mcp/                       # MCP æœåŠ¡å™¨
â”œâ”€â”€ app.py              # ä¸»åº”ç”¨å…¥å£ç‚¹
â”œâ”€â”€ tests/              # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ supabase/           # æ•°æ®åº“è¿ç§»
```

### å¼€å‘ç¯å¢ƒè®¾ç½®

#### ä½¿ç”¨ Poetryï¼ˆæ¨èï¼‰

1. **å®‰è£… Poetry**
   ```bash
   curl -sSL https://install.python-poetry.org | python3 -
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   poetry install
   ```

3. **è®¾ç½® Supabase CLI**
   ```bash
   ./scripts/supabase_setup.sh
   ```

4. **åº”ç”¨æ•°æ®åº“è¿ç§»**
   ```bash
   supabase db push
   ```

5. **è¿è¡Œåº”ç”¨**
   ```bash
   poetry run python app.py
   ```

#### ä½¿ç”¨ pip

1. **è®¾ç½®è™šæ‹Ÿç¯å¢ƒ**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\Scripts\activate
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

3. **è¿è¡Œåº”ç”¨**
   ```bash
   python app.py
   ```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»åˆ«
pytest tests/test_crawler_system.py
pytest tests/test_ui_integration.py
```

## ğŸ“Š æ•°æ®ç»“æ„

### æ•°æ®åº“æ¶æ„

#### æ–‡æ¡£é›†è¡¨
```sql
CREATE TABLE docsets (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  name text UNIQUE NOT NULL,
  description text,
  created_at timestamp DEFAULT now()
);
```

#### æ–‡æ¡£è¡¨
```sql
CREATE TABLE documents (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  docset_id uuid REFERENCES docsets(id) ON DELETE CASCADE,
  parent_id uuid REFERENCES documents(id) ON DELETE CASCADE,
  name text NOT NULL,
  type text CHECK (type IN ('file', 'url', 'github', 'website', 'github_file', 'github_readme', 'github_repo', 'repository', 'document', 'code', 'config', 'readme', 'documentation', 'configuration', 'data', 'image', 'binary', 'unknown')),
  url text,
  content text,
  metadata jsonb DEFAULT '{}',
  added_date timestamp DEFAULT now()
);
```

### çˆ¬è™«ç³»ç»Ÿ

ç³»ç»ŸåŒ…å«çµæ´»çš„çˆ¬è™«æ¶æ„ï¼š

#### å¯ç”¨çˆ¬è™«
- **GitHubCrawler**: è·å–ä»“åº“å†…å®¹å’Œå•ä¸ªæ–‡ä»¶
- **WebsiteCrawler**: ä»ä¸€èˆ¬ç½‘ç«™æå–å†…å®¹
- **MockCrawler**: ä¸ºå¼€å‘æä¾›æµ‹è¯•æ•°æ®

#### çˆ¬è™«æ¥å£
```python
class CrawlerInterface:
    def crawl(self, url: str, **kwargs) -> CrawlResult
    def can_handle(self, url: str) -> bool
    def get_supported_url_patterns(self) -> List[str]
    def get_rate_limit_info(self) -> Dict[str, Any]
```

## ğŸ”„ å¼€å‘é˜¶æ®µ

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ âœ…
- [x] åŸºç¡€ Gradio ç•Œé¢
- [x] MCP æœåŠ¡å™¨é›†æˆ
- [x] éƒ¨ç½²é…ç½®
- [x] æ–‡ä»¶ä¸Šä¼ ç•Œé¢

### ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®æ‘„å– âœ…
- [x] GitHub ä»“åº“çˆ¬è™«
- [x] ç½‘ç»œçˆ¬å–åŠŸèƒ½
- [x] æ–‡æ¡£å¤„ç†ç®¡é“
- [x] é…ç½®ç®¡ç†ç³»ç»Ÿ

### ç¬¬ä¸‰é˜¶æ®µï¼šRAG å®ç° âœ…
- [x] å‘é‡æ•°æ®åº“é›†æˆ
- [x] è¯­ä¹‰æœç´¢åŠŸèƒ½
- [x] LLM é›†æˆå“åº”
- [x] ä¸Šä¸‹æ–‡æ£€ç´¢å’Œç”Ÿæˆ

### ç¬¬å››é˜¶æ®µï¼šRAG-UI é›†æˆ âœ…
- [x] çŸ¥è¯†ç®¡ç†ä¸ RAG é›†æˆ
- [x] èŠå¤©ç•Œé¢ä¸ RAG å¢å¼º
- [x] MCP å·¥å…·ä¸ RAG é›†æˆ
- [x] UI åé¦ˆå’ŒçŠ¶æ€ç®¡ç†

### ç¬¬äº”é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ ğŸ“‹
- [ ] å¤šç”¨æˆ·è®¤è¯
- [ ] çŸ¥è¯†åº“ç®¡ç†
- [ ] ç¤¾åŒºåˆ†äº«åŠŸèƒ½
- [ ] é«˜çº§åˆ†æ

## ğŸ¤ è´¡çŒ®

1. **Fork ä»“åº“**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**: `git checkout -b feature/amazing-feature`
3. **æäº¤æ›´æ”¹**: `git commit -m 'Add amazing feature'`
4. **æ¨é€åˆ°åˆ†æ”¯**: `git push origin feature/amazing-feature`
5. **æ‰“å¼€ Pull Request**

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ†˜ æ”¯æŒ

- **GitHub Issues**: [æŠ¥å‘Šé”™è¯¯æˆ–è¯·æ±‚åŠŸèƒ½](https://github.com/your-username/ragspace/issues)
- **Discussions**: [åŠ å…¥ç¤¾åŒº](https://github.com/your-username/ragspace/discussions)
- **Documentation**: [å®Œæ•´æ–‡æ¡£](https://github.com/your-username/ragspace/wiki)

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] **å¤šç”¨æˆ·æ”¯æŒ**: å›¢é˜Ÿåä½œå’Œåˆ†äº«
- [ ] **é«˜çº§åˆ†æ**: ä½¿ç”¨æ´å¯Ÿå’Œæ€§èƒ½æŒ‡æ ‡
- [ ] **API å¸‚åœº**: ç¬¬ä¸‰æ–¹é›†æˆå’Œæ’ä»¶
- [ ] **ç§»åŠ¨æ”¯æŒ**: ç§»åŠ¨ä¼˜åŒ–ç•Œé¢
- [ ] **é«˜çº§æœç´¢**: å¤šæ¨¡æ€æœç´¢åŠŸèƒ½

---

ä½¿ç”¨ [Gradio](https://gradio.app) å’Œ [MCP](https://modelcontextprotocol.io) æ„å»º â¤ï¸
